<!--
1. ims Apn : ims
   > IWLAN & Cellular
=======================================================================================================================
    WIFI    RSSI    LTE    LTE RSRP    LTE RSQR    3G    3G RSCP    3G ECNO    2G    Call Type    PLMN    RESULT
=======================================================================================================================
1   GOOD   -75HIGH  X                              X                           X                          WIFI
2                                                                              O     IDLE         HOME    CELLULAR
3   GOOD   -75HIGH  X                              BAD    -108LOW                    IDLE         HOME    WIFI
4   GOOD   -75HIGH  X                              BAD              -120LOW          IDLE         HOME    WIFI
5   O               X                              GOOD   -102HIGH                   IDLE         HOME    CELLULAR
6   O               X                              GOOD             -90HIGH          IDLE         HOME    CELLULAR
7   GOOD   -75HIGH  BAD    -122LOW                                                   IDLE         HOME    WIFI
8   GOOD   -75HIGH  BAD                -140LOW                                       IDLE         HOME    WIFI
9   O               GOOD   -114HIGH                                                  IDLE         HOME    CELLULAR
10  O               GOOD               -100HIGH                                      IDLE         HOME    CELLULAR
11  GOOD   -75HIGH  BAD    -120LOW                                                   ACTIVE       HOME    WIFI
12  GOOD   -75HIGH  BAD                -160LOW                                       ACTIVE       HOME    WIFI
13  O               GOOD   -114HIGH                                                  ACTIVE       HOME    CELLULAR
14  O               GOOD               -120HIGH                                      ACTIVE       HOME    CELLULAR
15  GOOD   -75HIGH                                                                                ROAMING WIFI
16  O               GOOD   -114HIGH                                                  ACTIVE       ROAMING CELLULAR
17  O               GOOD               -120HIGH                                      ACTIVE       ROAMING CELLULAR
18  BAD    -85LOW                                                                                         CELLULAR
19  O                                                                                                     WIFI/CELLULAR
20  X                                                                                                     CELLULAR
=======================================================================================================================

2. XCAP Apn : internet.ideasclaro
   > IWLAN & Cellular
=======================================================================================================================
    WIFI    RSSI    LTE    LTE RSRP    LTE RSQR    3G    3G RSCP    3G ECNO    2G    Call Type    PLMN    RESULT
=======================================================================================================================
1   O               X                              X                X                                     WIFI
2   X                                                                                                     CELLULAR
3   O                                                                                                     CELLULAR
=======================================================================================================================
-->

<ANDSF version="5">
  <Name>IWLAN and Quality(AMX Specification V18)</Name>
  <ISRP>
    <Node>
      <ForServiceBased>
        <MAPCON_IMS_WIFI_GOOD_CELLULAR_X>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>0</LTEAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                    <WiFiRSSIHigh>-75</WiFiRSSIHigh>
                  </WiFiThreshold>
                  <UMTSThreshold>
                    <UMTSAvailable>0</UMTSAvailable>
                  </UMTSThreshold>
                  <GSMThreshold>
                    <GSMAvailable>0</GSMAvailable>
                  </GSMThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <RulePriority>1</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
        </MAPCON_IMS_WIFI_GOOD_CELLULAR_X>
        <MAPCON_IMS_GSM_O>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <GSMThreshold>
                    <GSMAvailable>1</GSMAvailable>
                  </GSMThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
              <CallConditions>
                <Node>
                  <CallState>0</CallState>
                </Node>
              </CallConditions>
              <PLMNCondition>
                <Node>
                  <Roam>0</Roam>
                </Node>
              </PLMNCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <RulePriority>2</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
        </MAPCON_IMS_GSM_O>
        <MAPCON_IMS_WIFI_GOOD_UMTS_RSCP_BAD>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>0</LTEAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                    <WiFiRSSIHigh>-75</WiFiRSSIHigh>
                  </WiFiThreshold>
                  <UMTSThreshold>
                    <UMTSAvailable>1</UMTSAvailable>
                    <UMTSRscpLow>-108</UMTSRscpLow>
                  </UMTSThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
              <CallConditions>
                <Node>
                  <CallState>0</CallState>
                </Node>
              </CallConditions>
              <PLMNCondition>
                <Node>
                  <Roam>0</Roam>
                </Node>
              </PLMNCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <RulePriority>3</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
        </MAPCON_IMS_WIFI_GOOD_UMTS_RSCP_BAD>
        <MAPCON_IMS_WIFI_GOOD_UMTS_ECNO_BAD>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>0</LTEAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                    <WiFiRSSIHigh>-75</WiFiRSSIHigh>
                  </WiFiThreshold>
                  <UMTSThreshold>
                    <UMTSAvailable>1</UMTSAvailable>
                    <UMTSECIOLow>-120</UMTSECIOLow>
                  </UMTSThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
              <CallConditions>
                <Node>
                  <CallState>0</CallState>
                </Node>
              </CallConditions>
              <PLMNCondition>
                <Node>
                  <Roam>0</Roam>
                </Node>
              </PLMNCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <RulePriority>4</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
        </MAPCON_IMS_WIFI_GOOD_UMTS_ECNO_BAD>
        <MAPCON_IMS_WIFI_O_UMTS_RCSP_GOOD>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>0</LTEAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                  <UMTSThreshold>
                    <UMTSAvailable>1</UMTSAvailable>
                    <UMTSRscpHigh>-102</UMTSRscpHigh>
                  </UMTSThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
              <CallConditions>
                <Node>
                  <CallState>0</CallState>
                </Node>
              </CallConditions>
              <PLMNCondition>
                <Node>
                  <Roam>0</Roam>
                </Node>
              </PLMNCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <RulePriority>5</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
        </MAPCON_IMS_WIFI_O_UMTS_RCSP_GOOD>
        <MAPCON_IMS_WIFI_O_UMTS_ECNO_GOOD>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>0</LTEAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                  <UMTSThreshold>
                    <UMTSAvailable>1</UMTSAvailable>
                    <UMTSECIOHigh>-90</UMTSECIOHigh>
                  </UMTSThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
              <CallConditions>
                <Node>
                  <CallState>0</CallState>
                </Node>
              </CallConditions>
              <PLMNCondition>
                <Node>
                  <Roam>0</Roam>
                </Node>
              </PLMNCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <RulePriority>6</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
        </MAPCON_IMS_WIFI_O_UMTS_ECNO_GOOD>
        <MAPCON_IMS_WIFI_GOOD_LTE_RSRP_BAD>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>1</LTEAvailable>
                    <LTERSRPLow>-122</LTERSRPLow>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                    <WiFiRSSIHigh>-75</WiFiRSSIHigh>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
              <CallConditions>
                <Node>
                  <CallState>0</CallState>
                </Node>
              </CallConditions>
              <PLMNCondition>
                <Node>
                  <Roam>0</Roam>
                </Node>
              </PLMNCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <RulePriority>7</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
        </MAPCON_IMS_WIFI_GOOD_LTE_RSRP_BAD>
        <MAPCON_IMS_WIFI_GOOD_LTE_RSQR_BAD>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>1</LTEAvailable>
                    <LTERSRQLow>-140</LTERSRQLow>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                    <WiFiRSSIHigh>-75</WiFiRSSIHigh>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
              <CallConditions>
                <Node>
                  <CallState>0</CallState>
                </Node>
              </CallConditions>
              <PLMNCondition>
                <Node>
                  <Roam>0</Roam>
                </Node>
              </PLMNCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <RulePriority>8</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
        </MAPCON_IMS_WIFI_GOOD_LTE_RSQR_BAD>
        <MAPCON_IMS_WIFI_O_LTE_RSRP_GOOD>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>1</LTEAvailable>
                    <LTERSRPHigh>-114</LTERSRPHigh>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
              <CallConditions>
                <Node>
                  <CallState>0</CallState>
                </Node>
              </CallConditions>
              <PLMNCondition>
                <Node>
                  <Roam>0</Roam>
                </Node>
              </PLMNCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <RulePriority>9</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
        </MAPCON_IMS_WIFI_O_LTE_RSRP_GOOD>
        <MAPCON_IMS_WIFI_O_LTE_RSRQ_GOOD>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>1</LTEAvailable>
                    <LTERSRQHigh>-100</LTERSRQHigh>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
              <CallConditions>
                <Node>
                  <CallState>0</CallState>
                </Node>
              </CallConditions>
              <PLMNCondition>
                <Node>
                  <Roam>0</Roam>
                </Node>
              </PLMNCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <RulePriority>10</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
        </MAPCON_IMS_WIFI_O_LTE_RSRQ_GOOD>
        <MAPCON_IMS_WIFI_GOOD_LTE_RSRP_BAD_ACTIVE>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>1</LTEAvailable>
                    <LTERSRPLow>-120</LTERSRPLow>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                    <WiFiRSSIHigh>-75</WiFiRSSIHigh>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
              <CallConditions>
                <Node>
                  <CallState>1</CallState>
                </Node>
              </CallConditions>
              <PLMNCondition>
                <Node>
                  <Roam>0</Roam>
                </Node>
              </PLMNCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <RulePriority>11</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
        </MAPCON_IMS_WIFI_GOOD_LTE_RSRP_BAD_ACTIVE>
        <MAPCON_IMS_WIFI_GOOD_LTE_RSRQ_BAD_ACTIVE>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>1</LTEAvailable>
                    <LTERSRQLow>-160</LTERSRQLow>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                    <WiFiRSSIHigh>-75</WiFiRSSIHigh>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
              <CallConditions>
                <Node>
                  <CallState>1</CallState>
                </Node>
              </CallConditions>
              <PLMNCondition>
                <Node>
                  <Roam>0</Roam>
                </Node>
              </PLMNCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <RulePriority>12</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
        </MAPCON_IMS_WIFI_GOOD_LTE_RSRQ_BAD_ACTIVE>
        <MAPCON_IMS_WIFI_O_LTE_RSRP_GOOD_ACTIVE>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>1</LTEAvailable>
                    <LTERSRPHigh>-114</LTERSRPHigh>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
              <CallConditions>
                <Node>
                  <CallState>1</CallState>
                </Node>
              </CallConditions>
              <PLMNCondition>
                <Node>
                  <Roam>0</Roam>
                </Node>
              </PLMNCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <RulePriority>13</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
        </MAPCON_IMS_WIFI_O_LTE_RSRP_GOOD_ACTIVE>
        <MAPCON_IMS_WIFI_O_LTE_RSRQ_GOOD_ACTIVE>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>1</LTEAvailable>
                    <LTERSRQHigh>-120</LTERSRQHigh>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
              <CallConditions>
                <Node>
                  <CallState>1</CallState>
                </Node>
              </CallConditions>
              <PLMNCondition>
                <Node>
                  <Roam>0</Roam>
                </Node>
              </PLMNCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <RulePriority>14</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
        </MAPCON_IMS_WIFI_O_LTE_RSRQ_GOOD_ACTIVE>
        <MAPCON_IMS_WIFI_GOOD_ROAMING>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>1</LTEAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                    <WiFiRSSIHigh>-75</WiFiRSSIHigh>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
              <PLMNCondition>
                <Node>
                  <Roam>1</Roam>
                </Node>
              </PLMNCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <RulePriority>15</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
        </MAPCON_IMS_WIFI_GOOD_ROAMING>
        <MAPCON_IMS_WIFI_O_LTE_RSRP_GOOD_ROAMING>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>1</LTEAvailable>
                    <LTERSRPHigh>-114</LTERSRPHigh>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                    <WiFiRSSILow>-85</WiFiRSSILow>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
              <CallConditions>
                <Node>
                  <CallState>1</CallState>
                </Node>
              </CallConditions>
              <PLMNCondition>
                <Node>
                  <Roam>1</Roam>
                </Node>
              </PLMNCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <RulePriority>16</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
        </MAPCON_IMS_WIFI_O_LTE_RSRP_GOOD_ROAMING>
        <MAPCON_IMS_WIFI_O_LTE_RSRQ_GOOD_ROAMING>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>1</LTEAvailable>
                    <LTERSRQHigh>-120</LTERSRQHigh>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                    <WiFiRSSILow>-85</WiFiRSSILow>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
              <CallConditions>
                <Node>
                  <CallState>1</CallState>
                </Node>
              </CallConditions>
              <PLMNCondition>
                <Node>
                  <Roam>1</Roam>
                </Node>
              </PLMNCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <RulePriority>17</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
        </MAPCON_IMS_WIFI_O_LTE_RSRQ_GOOD_ROAMING>
        <MAPCON_IMS_WIFI_BAD>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                    <WiFiRSSILow>-85</WiFiRSSILow>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <RulePriority>18</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
        </MAPCON_IMS_WIFI_BAD>
        <MAPCON_IMS_WIFI_O>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>2</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <RulePriority>19</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
        </MAPCON_IMS_WIFI_O>
        <MAPCON_IMS_WIFI_X>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <WiFiThreshold>
                    <WiFiAvailable>0</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
          <RulePriority>20</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
        </MAPCON_IMS_WIFI_X>

<!-- VoWiFi XCAP case -->
        <MAPCON_XCAP_WIFI_O_CELLULAR_X>
          <APN>internet.ideasclaro</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>0</LTEAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                  <UMTSThreshold>
                    <UMTSAvailable>0</UMTSAvailable>
                  </UMTSThreshold>
                  <GSMThreshold>
                    <GSMAvailable>0</GSMAvailable>
                  </GSMThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RulePriority>0</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
        </MAPCON_XCAP_WIFI_O_CELLULAR_X>
        <MAPCON_XCAP_WIFI_X>
          <APN>internet.ideasclaro</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <WiFiThreshold>
                    <WiFiAvailable>0</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RulePriority>1</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
        </MAPCON_XCAP_WIFI_X>
        <MAPCON_XCAP_WIFI_O>
          <APN>internet.ideasclaro</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RulePriority>2</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
        </MAPCON_XCAP_WIFI_O>
      </ForServiceBased>
    </Node>
  </ISRP>
</ANDSF>
