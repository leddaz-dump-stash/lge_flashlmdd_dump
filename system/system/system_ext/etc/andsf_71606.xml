<!--
1. ims Apn : ims
   > IWLAN & Cellular
=======================================================================================================================
    WIFI    RSSI    LTE    LTE RSRP    LTE RSQR    3G    3G RSCP    3G ECNO    2G    Call PREF    PLMN    RESULT
=======================================================================================================================
1   GOOD   -75HIGH                                                                   WIFI                 WIFI
2   BAD    -85LOW                                                                    WIFI                 CELLULAR
3   O                                                                                WIFI                 WIFI/CELLULAR
4   GOOD   -75HIGH                                                                   WIFI PREF            WIFI
5   BAD    -85LOW                                                                    WIFI PREF            CELLULAR
6   O                                                                                WIFI PREF            WIFI/CELLULAR
7   X                                                                                                     CELLULAR
8   GOOD   -75HIGH  X                              X                           X     CEL PREF             WIFI
9                                                                              O     CEL PREF             CELLULAR
10  GOOD   -75HIGH  X                              BAD    -110LOW                    CEL PREF             WIFI
11  O               X                              GOOD   -106HIGH                   CEL PREF             CELLULAR
12  GOOD   -75HIGH  BAD    -118LOW                                                   CEL PREF             WIFI
13  O               GOOD   -110HIGH                                                  CEL PREF             CELLULAR
14  BAD    -85LOW                                                                                         CELLULAR
15  O                                                                                                     CELLULAR/WIFI
=======================================================================================================================
-->
<ANDSF version="1">
  <Name>IWLAN and Quality(Telefonica Peru) 20200408</Name>
  <ISRP>
    <Node>
      <ForServiceBased>
        <MAPCON_WIFI_O_WIFIGOOD_WIFI_ONLY>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                    <WiFiRSSIHigh>-75</WiFiRSSIHigh>
                  </WiFiThreshold>
                </ThresholdConditions>
                <CallPreference>1</CallPreference>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RulePriority>0</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
        </MAPCON_WIFI_O_WIFIGOOD_WIFI_ONLY>
        <MAPCON_WIFI_O_WIFIBAD_WIFI_ONLY>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                    <WiFiRSSILow>-85</WiFiRSSILow>
                  </WiFiThreshold>
                </ThresholdConditions>
                <CallPreference>1</CallPreference>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RulePriority>1</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
        </MAPCON_WIFI_O_WIFIBAD_WIFI_ONLY>
        <MAPCON_WIFI_O_WIFI_ONLY>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
                <CallPreference>1</CallPreference>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RulePriority>2</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>2</AccessNetworkPriority>
            </Node>
          </RoutingRule>
        </MAPCON_WIFI_O_WIFI_ONLY>
        <MAPCON_WIFI_O_WIFIGOOD_WIFI_PREFERRED>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                    <WiFiRSSIHigh>-75</WiFiRSSIHigh>
                  </WiFiThreshold>
                </ThresholdConditions>
                <CallPreference>0</CallPreference>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RulePriority>3</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
        </MAPCON_WIFI_O_WIFIGOOD_WIFI_PREFERRED>
        <MAPCON_WIFI_O_WIFIBAD_WIFI_PREFERRED>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                    <WiFiRSSILow>-85</WiFiRSSILow>
                  </WiFiThreshold>
                </ThresholdConditions>
                <CallPreference>0</CallPreference>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RulePriority>4</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
        </MAPCON_WIFI_O_WIFIBAD_WIFI_PREFERRED>
        <MAPCON_WIFI_O_WIFI_PREFERRED>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
                <CallPreference>0</CallPreference>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RulePriority>5</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>2</AccessNetworkPriority>
            </Node>
          </RoutingRule>
        </MAPCON_WIFI_O_WIFI_PREFERRED>
        <MAPCON_WIFI_X>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <WiFiThreshold>
                    <WiFiAvailable>0</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RulePriority>6</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
        </MAPCON_WIFI_X>
        <MAPCON_WIFI_O_WIFIGOOD_CELLULAR_X>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>0</LTEAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                    <WiFiRSSIHigh>-75</WiFiRSSIHigh>
                  </WiFiThreshold>
                  <UMTSThreshold>
                    <UMTSAvailable>0</UMTSAvailable>
                  </UMTSThreshold>
                  <GSMThreshold>
                    <GSMAvailable>0</GSMAvailable>
                  </GSMThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RulePriority>7</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
        </MAPCON_WIFI_O_WIFIGOOD_CELLULAR_X>
        <MAPCON_GSM_O>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <GSMThreshold>
                    <GSMAvailable>1</GSMAvailable>
                  </GSMThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RulePriority>8</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
        </MAPCON_GSM_O>
        <MAPCON_WIFI_O_WIFIGOOD_UMTS_O_UMTSBAD>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>0</LTEAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                    <WiFiRSSIHigh>-75</WiFiRSSIHigh>
                  </WiFiThreshold>
                  <UMTSThreshold>
                    <UMTSAvailable>1</UMTSAvailable>
                    <UMTSRscpLow>-110</UMTSRscpLow>
                  </UMTSThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RulePriority>9</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
        </MAPCON_WIFI_O_WIFIGOOD_UMTS_O_UMTSBAD>
        <MAPCON_WIFI_O_UMTS_O_UMTSGOOD>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>0</LTEAvailable>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                  <UMTSThreshold>
                    <UMTSAvailable>1</UMTSAvailable>
                    <UMTSRscpHigh>-106</UMTSRscpHigh>
                  </UMTSThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RulePriority>10</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
        </MAPCON_WIFI_O_UMTS_O_UMTSGOOD>
        <MAPCON_WIFI_O_WIFIGOOD_LTE_O_LTEBAD>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>1</LTEAvailable>
                    <LTERSRPLow>-118</LTERSRPLow>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                    <WiFiRSSIHigh>-75</WiFiRSSIHigh>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RulePriority>11</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
          <RoutingRule>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
        </MAPCON_WIFI_O_WIFIGOOD_LTE_O_LTEBAD>
        <MAPCON_WIFI_O_LTE_O_LTEGOOD>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <LTEThreshold>
                    <LTEAvailable>1</LTEAvailable>
                    <LTERSRPHigh>-110</LTERSRPHigh>
                  </LTEThreshold>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RulePriority>12</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
        </MAPCON_WIFI_O_LTE_O_LTEGOOD>
        <MAPCON_WIFI_O_WIFIBAD>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                    <WiFiRSSILow>-85</WiFiRSSILow>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RulePriority>13</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
          </RoutingRule>
        </MAPCON_WIFI_O_WIFIBAD>
        <MAPCON_WIFI_O>
          <APN>ims</APN>
          <RoutingCriteria>
            <Node>
              <OPSpecificRANValidityCondition>
                <ThresholdConditions>
                  <WiFiThreshold>
                    <WiFiAvailable>1</WiFiAvailable>
                  </WiFiThreshold>
                </ThresholdConditions>
              </OPSpecificRANValidityCondition>
            </Node>
          </RoutingCriteria>
          <RulePriority>14</RulePriority>
          <IsAPIOverride>1</IsAPIOverride>
          <RoutingRule>
            <Node>
              <AccessTechnology>1</AccessTechnology>
              <AccessNetworkPriority>1</AccessNetworkPriority>
            </Node>
            <Node>
              <AccessTechnology>3</AccessTechnology>
              <AccessNetworkPriority>2</AccessNetworkPriority>
            </Node>
          </RoutingRule>
        </MAPCON_WIFI_O>
      </ForServiceBased>
    </Node>
  </ISRP>
</ANDSF>
